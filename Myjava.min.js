<script type='text/javascript'>
// Function to trim whitespace from a string
function convertstr(str) {
    return str.replace(/^\s+/, '').replace(/\s+$/, '');
}

// Function to handle link generation and redirection
function generateLink() {
    // Get the input URL
    var inputUrl = document.getElementById('generateurl').value;

    // Validate the input URL
    if (!inputUrl) {
        alert("Please enter a valid URL.");
        return;
    }

    // Encrypt the input URL using AES encryption
    var encryptedUrl = CryptoJS.AES.encrypt(convertstr(inputUrl), convertstr('root')).toString();

    // Generate the final link
    var finalLink = "https://example.com#?o=" + encryptedUrl;

    // Display the generated link
    var resultUrl = document.getElementById('resulturl');
    resultUrl.value = finalLink;

    // Show the result section
    document.getElementById('generatelink').classList.remove('hidden');

    // Redirect to the homepage first
    window.location.href = "/";

    // Redirect to the generated link after 5 seconds
    setTimeout(function() {
        window.location.href = finalLink;
    }, 5000); // 5000 milliseconds = 5 seconds
}

// Attach the generateLink function to the button click event
document.getElementById('btngenerate').addEventListener('click', generateLink);
</script>
